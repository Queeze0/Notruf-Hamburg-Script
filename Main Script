local Rayfield = loadstring(game:HttpGet('https://raw.githubusercontent.com/Queeze0/Notruf-Hamburg-Script/main/Rayfield'))()

local Window = Rayfield:CreateWindow({
   Name = "ðŸš“ Emergency Hamburg script ðŸš“",
   LoadingTitle = "Emergency Hamburg script",
   LoadingSubtitle = "by Queeze",
   ConfigurationSaving = {
      Enabled = false,
      FolderName = nil,
      FileName = "Queeze Hub"
   },
   Discord = {
      Enabled = false,
      Invite = "jQn7GCw4WV",
      RememberJoins = false
   },
   KeySystem = true,
   KeySettings = {
      Title = "Emergency Hamburg | Key",
      Subtitle = "Link In Discord Server",
      Note = "Key in Discord",
      FileName = "Emergency Hamburg Key",
      SaveKey = false,
      GrabKeyFromSite = false,
      Key = {"Queeze"}
   }
})

-- Initialize a flag to indicate whether the script should run
local shouldRunScript = false

-- Tabs
local MainTab = Window:CreateTab("Main", nil)
local ServerTab = Window:CreateTab("Server", nil)

-- Sections
local MainSection = MainTab:CreateSection("Charakter")

-- Reset Charakter Button
local Button = MainTab:CreateButton({
   Name = "Reset Charakter",
   Callback = function()
      local player = game.Players.LocalPlayer
      local character = player.Character or player.CharacterAdded:Wait()

      if character and character:FindFirstChild("Humanoid") then
          character.Humanoid.Health = 0
      end      
   end,
})

-- Vehicle Fly Button
local MainSection = MainTab:CreateSection("Vehicle")
local Button = MainTab:CreateButton({
    Name = "Vehicle fly",
    Callback = function()
        loadstring(game:HttpGet("https://pastebin.com/raw/v5Pj1G8p", true))()
    end,
 })

-- Dex Explorer Button
local MainSection = MainTab:CreateSection("Misc")
local Button = MainTab:CreateButton({
    Name = "Dex Explorer",
    Callback = function()
        loadstring(game:HttpGet("https://raw.githubusercontent.com/infyiff/backup/main/dex.lua"))()
    end,
})

-- Server-Rejoin Button (Kick player and rejoin to a different server)
local MainSection = ServerTab:CreateSection("Server-Switch")
local Button = ServerTab:CreateButton({
   Name = "Server-Switch",
   Callback = function()
      local TeleportService = game:GetService("TeleportService")
      local placeId = game.PlaceId -- The current game's PlaceId
      local player = game.Players.LocalPlayer

      -- Set the flag indicating that the script should run
      shouldRunScript = true

      -- Kick player from the current game
      local success, err = pcall(function()
         -- This will kick the player and automatically rejoin to a different server
         player:Kick("Kicking to join a new server with other players...")
      end)

      -- If an error occurs, print it to the console
      if not success then
         warn("Fehler beim Kick: " .. tostring(err))
      end

      -- Use a delay to ensure the kick takes effect before rejoining
      wait(5) -- Increase delay to ensure proper kick and rejoin

      -- Attempt to teleport to a new server (different instance)
      local success, err = pcall(function()
         -- Use a method to ensure new instance
         TeleportService:Teleport(placeId, player)
      end)

      if not success then
         warn("Fehler beim Teleportieren: " .. tostring(err))
      end
   end,
})

